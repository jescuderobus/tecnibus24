<!DOCTYPE html>
<html amp lang="en">
<head>
  <meta charset="utf-8">
  <title>Web Stories</title>
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <style amp-custom>
    /* Tu CSS personalizado aquí */
  </style>
</head>
<body>
  <amp-story standalone
              title="Joy of Pets"
              publisher="AMP tutorials"
              publisher-logo-src="assets/AMP-Brand-White-Icon.svg"
              poster-portrait-src="assets/cover.jpg">
    <!-- El contenido de las historias se generará dinámicamente aquí -->
  </amp-story>

  <script>
    // Tu array de historias en formato JSON
    var stories = [
      { id: "cover", title: "The Joy of Pets", image: "assets/cover.jpg", url: "" },
      { id: "page1", title: "Cats", image: "assets/cat.jpg", url: "" },
      { id: "page2", title: "Dogs", image: "assets/dog.jpg", url: "" },
      { id: "page3", title: "Birds", image: "assets/bird.jpg", url: "" },
      { id: "page4", title: "Rabbits", image: "assets/rabbit.jpg", url: "" },
      { id: "page5", title: "Collage", image: "", url: "" },
    ];

    // Función para reorganizar aleatoriamente el array de historias
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Llama a la función para reorganizar aleatoriamente el array
    shuffleArray(stories);

    // Función para generar el contenido de AMP
    function generateAMPContent() {
      var ampStory = document.querySelector('amp-story');

      // Itera sobre las historias reorganizadas y genera el contenido de AMP
      stories.forEach(function(story) {
        var ampStoryPage = document.createElement('amp-story-page');
        ampStoryPage.id = story.id;

        if (story.image) {
          ampStoryPage.innerHTML = `
            <amp-story-grid-layer template="fill">
              <amp-img src="${story.image}"
                  width="720" height="1280"
                  layout="responsive">
              </amp-img>
            </amp-story-grid-layer>
          `;
        }

        if (story.title) {
          ampStoryPage.innerHTML += `
            <amp-story-grid-layer template="vertical">
              <h1>${story.title}</h1>
            </amp-story-grid-layer>
          `;
        }

        ampStory.appendChild(ampStoryPage);
      });
    }

    // Llama a la función para generar el contenido de AMP
    generateAMPContent();
  </script>
</body>
</html>
